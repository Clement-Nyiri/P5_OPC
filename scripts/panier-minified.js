let produitsDejaPresents=JSON.parse(localStorage.getItem("panier"));const panierProduit=document.getElementById("panier_produit");if(null==produitsDejaPresents){var panierVide=document.getElementById("panierVide");panierVide.innerText="Le panier est vide!"}else{let e=[],t=0;for(k=0;k<produitsDejaPresents.length;k++){e+=`<div class="pt-2 pb-2 border-bottom border-danger" id="produit_achete">\n        <a href="produit.html?${produitsDejaPresents[k].id}"><img class="ml-lg-auto mr-lg-n1" id="image_panier" src="${produitsDejaPresents[k].image}" width="70" height="60" alt="image_article" /></a>\n        <a href="produit.html?${produitsDejaPresents[k].id}"><p id="nom_panier" class="ml-lg-2 text-decoration-none"><span id="nom_produit" class="font-weight-bold">${produitsDejaPresents[k].name}</span> <br/> ${produitsDejaPresents[k].description}</p></a>\n        <p class="mt-lg-2 mr-lg-1 ml-md-2 font-weight-bold">Qt√©:${produitsDejaPresents[k].quantity}</p>\n        <button class="btn btn-dark h-100 mr-1" id="btn-supprimer" data-num="${k}">Supprimer</button>\n        <p class="font-weight-bold mt-2 mr-lg-2" id="prix_panier">${new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(produitsDejaPresents[k].price/100)}</p>\n        </div>`;var totalProduit=parseFloat(produitsDejaPresents[k].price);t+=totalProduit*produitsDejaPresents[k].quantity}var sousTotal='<h5 class="text-right mt-2 mb-n2 font-weight-bold" id="total_prix">Total: '+new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t/100)+"</h5>";panierProduit.innerHTML=e+sousTotal;const r=document.querySelectorAll("#btn-supprimer");for(m=0;m<r.length;m++)r[m].addEventListener("click",function(e){var t=parseInt(e.currentTarget.getAttribute("data-num"));produitsDejaPresents.splice(t,1),0==produitsDejaPresents.length?localStorage.removeItem("panier"):localStorage.setItem("panier",JSON.stringify(produitsDejaPresents)),document.location.reload()});function checkInput(e,t,r){return t.test(e)?(document.getElementById(r).textContent="",!0):(document.getElementById(r).textContent="Veuillez remplir correctement ce champ",!1)}var commande=document.getElementById("commander");commande.addEventListener("click",e=>{e.preventDefault();const t={firstName:document.getElementById("firstName").value,lastName:document.getElementById("lastName").value,address:document.getElementById("adress").value,city:document.getElementById("city").value,email:document.getElementById("email").value};checkInput(t.firstName,/^([A-Za-z]{3,20})?([-]{0,1})?([A-Za-z]{3,20})$/,"firstNameErreur")&&checkInput(t.lastName,/^([A-Za-z]{3,20})?([-]{0,1})?([A-Za-z]{3,20})$/,"lastNameErreur")&&checkInput(t.address,/^[A-Za-z0-9\s]{6,60}$/,"adressErreur")&&checkInput(t.city,/^([A-Za-z]{3,20})?([-]{0,1})?([A-Za-z]{3,20})$/,"cityErreur")&&checkInput(t.email,/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,"emailErreur")?(localStorage.setItem("contact",JSON.stringify(t)),window.location.replace("commande_thx.html")):alert("Veuillez remplir correctement le formulaire")})}